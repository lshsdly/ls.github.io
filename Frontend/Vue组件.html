<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue 组件 | Better than never</title>
    <meta name="description" content="梁的个人网站">
    <link rel="icon" href="/logo.jpg">
    
    <link rel="preload" href="/assets/css/0.styles.80698cd3.css" as="style"><link rel="preload" href="/assets/js/app.aa07e3f0.js" as="script"><link rel="preload" href="/assets/js/2.3c3a8b86.js" as="script"><link rel="preload" href="/assets/js/19.ea1c561c.js" as="script"><link rel="prefetch" href="/assets/js/10.16485189.js"><link rel="prefetch" href="/assets/js/11.087b2c37.js"><link rel="prefetch" href="/assets/js/12.1232ddd6.js"><link rel="prefetch" href="/assets/js/13.d08737f4.js"><link rel="prefetch" href="/assets/js/14.5400c51f.js"><link rel="prefetch" href="/assets/js/15.6e20fcc4.js"><link rel="prefetch" href="/assets/js/16.8f188508.js"><link rel="prefetch" href="/assets/js/17.31b200b9.js"><link rel="prefetch" href="/assets/js/18.09631d42.js"><link rel="prefetch" href="/assets/js/20.7e1fbe74.js"><link rel="prefetch" href="/assets/js/21.6a57e774.js"><link rel="prefetch" href="/assets/js/22.0b5e3d00.js"><link rel="prefetch" href="/assets/js/23.c0b1a40b.js"><link rel="prefetch" href="/assets/js/24.6aaf1c96.js"><link rel="prefetch" href="/assets/js/25.52f988b5.js"><link rel="prefetch" href="/assets/js/26.ca333bb8.js"><link rel="prefetch" href="/assets/js/27.c6dae7fd.js"><link rel="prefetch" href="/assets/js/28.5e816cc0.js"><link rel="prefetch" href="/assets/js/3.1a056928.js"><link rel="prefetch" href="/assets/js/4.1ae91333.js"><link rel="prefetch" href="/assets/js/5.9279dd66.js"><link rel="prefetch" href="/assets/js/6.5e5f6408.js"><link rel="prefetch" href="/assets/js/7.a81f715f.js"><link rel="prefetch" href="/assets/js/8.d07cfd7b.js"><link rel="prefetch" href="/assets/js/9.b0483dea.js">
    <link rel="stylesheet" href="/assets/css/0.styles.80698cd3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Better than never</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Frontend/" class="nav-link router-link-active">前端相关</a></div><div class="nav-item"><a href="/resume.html" class="nav-link">个人简历</a></div><div class="nav-item"><a href="/Tools.html" class="nav-link">工具资源（待）</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Frontend/" class="nav-link router-link-active">前端相关</a></div><div class="nav-item"><a href="/resume.html" class="nav-link">个人简历</a></div><div class="nav-item"><a href="/Tools.html" class="nav-link">工具资源（待）</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Vue 组件</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Frontend/Vue%E7%BB%84%E4%BB%B6.html#组件注册" class="sidebar-link">组件注册</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend/Vue%E7%BB%84%E4%BB%B6.html#组件名" class="sidebar-link">组件名</a></li><li class="sidebar-sub-header"><a href="/Frontend/Vue%E7%BB%84%E4%BB%B6.html#注册类型" class="sidebar-link">注册类型</a></li><li class="sidebar-sub-header"><a href="/Frontend/Vue%E7%BB%84%E4%BB%B6.html#scoped-样式作用域" class="sidebar-link">scoped 样式作用域</a></li><li class="sidebar-sub-header"><a href="/Frontend/Vue%E7%BB%84%E4%BB%B6.html#模块系统" class="sidebar-link">模块系统</a></li></ul></li><li><a href="/Frontend/Vue%E7%BB%84%E4%BB%B6.html#组件通信" class="sidebar-link">组件通信</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend/Vue%E7%BB%84%E4%BB%B6.html#父子通信" class="sidebar-link">父子通信</a></li><li class="sidebar-sub-header"><a href="/Frontend/Vue%E7%BB%84%E4%BB%B6.html#兄弟通信" class="sidebar-link">兄弟通信</a></li><li class="sidebar-sub-header"><a href="/Frontend/Vue%E7%BB%84%E4%BB%B6.html#eventbus" class="sidebar-link">eventBus</a></li></ul></li><li><a href="/Frontend/Vue%E7%BB%84%E4%BB%B6.html#props-属性" class="sidebar-link">props 属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend/Vue%E7%BB%84%E4%BB%B6.html#写法" class="sidebar-link">写法</a></li><li class="sidebar-sub-header"><a href="/Frontend/Vue%E7%BB%84%E4%BB%B6.html#类型" class="sidebar-link">类型</a></li><li class="sidebar-sub-header"><a href="/Frontend/Vue%E7%BB%84%E4%BB%B6.html#传递静态-动态-prop" class="sidebar-link">传递静态/动态 Prop</a></li></ul></li><li><a href="/Frontend/Vue%E7%BB%84%E4%BB%B6.html#emit-自定义事件" class="sidebar-link">$emit 自定义事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend/Vue%E7%BB%84%E4%BB%B6.html#父组件监听" class="sidebar-link">父组件监听</a></li></ul></li><li><a href="/Frontend/Vue%E7%BB%84%E4%BB%B6.html#slot-插槽" class="sidebar-link">slot 插槽</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend/Vue%E7%BB%84%E4%BB%B6.html#语法" class="sidebar-link">语法</a></li><li class="sidebar-sub-header"><a href="/Frontend/Vue%E7%BB%84%E4%BB%B6.html#渲染及风格化" class="sidebar-link">渲染及风格化</a></li><li class="sidebar-sub-header"><a href="/Frontend/Vue%E7%BB%84%E4%BB%B6.html#插槽命名" class="sidebar-link">插槽命名</a></li></ul></li><li><a href="/Frontend/Vue%E7%BB%84%E4%BB%B6.html#动态组件" class="sidebar-link">动态组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend/Vue%E7%BB%84%E4%BB%B6.html#动态组件保活" class="sidebar-link">动态组件保活</a></li><li class="sidebar-sub-header"><a href="/Frontend/Vue%E7%BB%84%E4%BB%B6.html#动态生命周期钩子" class="sidebar-link">动态生命周期钩子</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue-组件"><a href="#vue-组件" aria-hidden="true" class="header-anchor">#</a> Vue 组件</h1> <h2 id="组件注册"><a href="#组件注册" aria-hidden="true" class="header-anchor">#</a> 组件注册</h2> <h3 id="组件名"><a href="#组件名" aria-hidden="true" class="header-anchor">#</a> 组件名</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'cmp-name'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      statue<span class="token punctuation">:</span> <span class="token string">'Critical'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  template<span class="token punctuation">:</span> <span class="token string">'&lt;p&gt;{{statue}}&lt;/p&gt;'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>第一个参数：组件名 必须
<ul><li>避免重复</li> <li>尽量加前缀以确保唯一性</li></ul></li> <li>第二个参数：表示组件的对象，和传入给 Vue 实例的对象大体相似
<ul><li>组件基本上是继承 Vue 实例，使用实例的 data 设置方法会冲突/影响其他 data——避免使用共享对象，以确保每个组件的 data 独立</li> <li>组件中的 data 应为函数</li> <li>函数中的 key 依然可以在组件中通过 this 访问</li></ul></li></ul> <p>当直接在 DOM 中使用一个组件（而非在字符串模板或单文件组件）时，遵循 W3C 规范中的自定义组件名：</p> <ul><li><p>字母全小写</p></li> <li><p>必须包含一个连字符 → 避免和当前及未来的 HTML 元素冲突</p></li> <li><p>更多组件名建议参照<a href="https://cn.vuejs.org/v2/style-guide/" target="_blank" rel="noopener noreferrer">风格指南<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ul> <h4 id="大小写"><a href="#大小写" aria-hidden="true" class="header-anchor">#</a> 大小写</h4> <p>定义组件名的方式：</p> <ol><li><strong>kebab-case 短横线分隔命名</strong></li></ol> <ul><li><code>my-component-name</code></li></ul> <p>当使用 kebab-case 定义组件时，你必须在引用这个自定义元素时使用 kebab-case：</p> <ul><li><code>&lt;my-component-name&gt;</code></li></ul> <ol start="2"><li><strong>PascalCase 首字母大写命名</strong></li></ol> <ul><li><code>MyComponentName</code></li></ul> <p>当使用 PascalCase 时，在引用这个自定义元素时两种命名法都可以使用：</p> <ul><li><code>&lt;my-component-name&gt;</code></li> <li><code>&lt;MyComponentName&gt;</code></li></ul> <blockquote><p>直接在 DOM（非字符串的模板）中使用时，只有 kebab-case 是有效的。</p></blockquote> <blockquote><p>这不是 Vue 语法，而是 ES6 语法。
ES6 允许仅适用键不写值，即 <code>components: { Servers }</code> 式的写法，这样会导致 Vue 获取的 Servers 变量或这里导入的对象在背后创建键值对时的，键值都是 Servers。</p></blockquote> <h3 id="注册类型"><a href="#注册类型" aria-hidden="true" class="header-anchor">#</a> 注册类型</h3> <h4 id="全局注册"><a href="#全局注册" aria-hidden="true" class="header-anchor">#</a> 全局注册</h4> <ul><li><code>Vue.component(name, options)</code></li></ul> <p>特点：</p> <ul><li>注册后可以用在任何新创建的 Vue 根实例（<code>new Vue</code>）的模板中；</li> <li>在所有子组件中也是如此，即各个自定义组件在各自内部也可以相互使用。</li></ul> <p>缺点：</p> <ul><li>如使用像 webpack 这样的构建系统，全局注册所有的组件意味着即使这个组件已经不再被使用，它仍会包含在最终的构建结果中 → 用户下载的 javascript 无谓增加。</li></ul> <h4 id="局部注册"><a href="#局部注册" aria-hidden="true" class="header-anchor">#</a> 局部注册</h4> <p>通过普通的 JavaScript 对象定义组件，如：</p> <div class="language-javascritp line-numbers-mode"><pre class="language-text"><code>var ComponentA = {/*...*/}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后在 <code>component</code> 选项中定义要使用的组件：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">'component-a'</span><span class="token punctuation">:</span> ComponentA<span class="token punctuation">,</span>
    <span class="token string">'component-b'</span><span class="token punctuation">:</span> ComponentB
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>对于 <code>components</code> 对象中的每个属性来说，其属性名就是自定义元素的<strong>名字</strong>，其属性值就是这个组件的<strong>选项对象</strong>。</p> <ul><li>局部注册的组件在其子组件中<strong>不可用</strong>。</li> <li>如果希望可用，需：</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> ComponentA <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token comment">/*...*/</span><span class="token punctuation">}</span>  <span class="token comment">// 不需要再设置选择器</span>
<span class="token keyword">var</span> ComponentB <span class="token operator">-</span> <span class="token punctuation">{</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">'component-a'</span><span class="token punctuation">:</span> ComponentA
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>如通过 Babel / webpack 使用 ES2015 模块，则：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> ComponentA <span class="token keyword">from</span> <span class="token string">'./ComponentA.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    ComponentA
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>在 ES2015+ 中，在对象中放一个类似 <code>ComponentA</code> 的变量名其实是 <code>ComponentA: ComponentA</code> 的缩写，即此变量名同时是：</p> <ul><li>用在模板中的自定义元素名</li> <li>包含此组件选项的变量名</li></ul> <h3 id="scoped-样式作用域"><a href="#scoped-样式作用域" aria-hidden="true" class="header-anchor">#</a> scoped 样式作用域</h3> <ul><li><p>样式的默认作用域不局限在组件里，而是作用于全局</p></li> <li><p>样式在页面头部按 import 的顺序排列</p></li> <li><p>可以通过 <code>&lt;style scoped&gt;&lt;/style&gt;</code> 来改变默认作用域</p></li> <li><p>这样就模拟了 shadow DOM——未来浏览器中可能加入的功能</p> <ul><li>每个元素背后可能有一个 DOM，而不是仅有一个全局 DOM，还有许多子 DOM</li> <li>一个元素可能在不同的位置有不同的样式，因为其背后的 DOM 不同</li></ul></li></ul> <blockquote><p>Vue 模拟 shadow DOM 的方式：
给设定 scoped 的元素设置 data-v-id 属性，各 id 不同，组件内 id 保持不变。</p> <p>PS. 这不是默认的 HTML 属性，但不与默认属性冲突，实际上使用了原生支持的 data 属性。</p></blockquote> <p><strong>实现原理：</strong></p> <p>我们在组件中设置的属性，被放置到了页面文件的 head 中（没有设置 style 的组件会放置一个空的 style 标签），Vue 将样式设置为 <code>div[data-v-id]</code>，不仅通过选择器检索，也通过设置的此属性检索。</p> <h3 id="模块系统"><a href="#模块系统" aria-hidden="true" class="header-anchor">#</a> 模块系统</h3> <h4 id="模块系统中局部注册"><a href="#模块系统中局部注册" aria-hidden="true" class="header-anchor">#</a> 模块系统中局部注册</h4> <blockquote><p>使用如 webpack 的模块系统，通过 <code>import</code>/<code>require</code> 使用模块系统，
推荐创建 components 目录，将组件放置在其各自的文件中。</p></blockquote> <p>在需要局部注册前导入每个需要的组件：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> ComponentA <span class="token keyword">from</span> <span class="token string">'./ComponentA'</span>
<span class="token keyword">import</span> ComponentB <span class="token keyword">from</span> <span class="token string">'./ComponentB'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="基础组件自动化全局注册"><a href="#基础组件自动化全局注册" aria-hidden="true" class="header-anchor">#</a> 基础组件自动化全局注册</h4> <ul><li>仅包含较少/特定元素，相对通用</li> <li>会在各个组件中被频繁引用</li> <li>→ 导致许多组件内有一个包含基础组件的长列表，而仅用于模板中的一小部分：</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> BaseButton <span class="token keyword">from</span> <span class="token string">'./BaseButton.vue'</span>
<span class="token keyword">import</span> BaseIcon <span class="token keyword">from</span> <span class="token string">'./BaseIcon.vue'</span>
<span class="token keyword">import</span> BaseInput <span class="token keyword">from</span> <span class="token string">'./BaseInput.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    BaseButton<span class="token punctuation">,</span>
    BaseIcon<span class="token punctuation">,</span>
    BaseInput
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>若使用了 webpack（或在内部使用了 webpack 的 Vue CLI 3+），则可以使用 <code>require.context</code> 只全局注册这些非常通用的基础组件。</p> <p>可在应用入口文件 (比如 src/main.js) 中全局导入基础组件的示例：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> upperFirst <span class="token keyword">from</span> <span class="token string">'lodash/upperFirst'</span>
<span class="token keyword">import</span> camelCase <span class="token keyword">from</span> <span class="token string">'lodash/camelCase'</span>

<span class="token keyword">const</span> requireComponent <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span>
  <span class="token comment">// 其组件目录的相对路径</span>
  <span class="token string">'./components'</span><span class="token punctuation">,</span>
  <span class="token comment">// 是否查询其子目录</span>
  <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// 匹配基础组件文件名的正则</span>
  <span class="token operator">/</span>Base<span class="token punctuation">[</span><span class="token constant">A</span><span class="token operator">-</span><span class="token constant">Z</span><span class="token punctuation">]</span>\w<span class="token operator">+</span>\<span class="token punctuation">.</span><span class="token punctuation">(</span>vue<span class="token operator">|</span>js<span class="token punctuation">)</span>$<span class="token operator">/</span>
<span class="token punctuation">)</span>

requireComponent<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">fileName</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获取组件配置</span>
  <span class="token keyword">const</span> componentConfig <span class="token operator">=</span> <span class="token function">requireComponent</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span>
  <span class="token comment">// 获取组件的 PascalCase 命名</span>
  <span class="token keyword">const</span> componentName <span class="token operator">=</span> <span class="token function">upperFirst</span><span class="token punctuation">(</span>
    <span class="token function">camelCase</span><span class="token punctuation">(</span>
      <span class="token comment">// 获取和目录深度无关的文件名</span>
      fileName
        <span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\.=w+$/</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
  
  <span class="token comment">// 全局注册组件</span>
  Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>
    conponentName<span class="token punctuation">,</span>
    <span class="token comment">// 如果这个组件选项是通过 `export default` 导出的，则优先使用 `.default`，否则回退到使用模块的根。</span>
    componentConfig<span class="token punctuation">.</span>default <span class="token operator">||</span> componentConfig
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>全局注册的行为必须在根 Vue 实例创建前发生。</p> <h2 id="组件通信"><a href="#组件通信" aria-hidden="true" class="header-anchor">#</a> 组件通信</h2> <h3 id="父子通信"><a href="#父子通信" aria-hidden="true" class="header-anchor">#</a> 父子通信</h3> <h4 id="父-子"><a href="#父-子" aria-hidden="true" class="header-anchor">#</a> 父 -&gt; 子</h4> <ul><li>props
<ul><li>由外层父组件设置的数据</li> <li>不仅可以定义，还可以在子组件的 methods 中访问该属性，就像访问组件中的其他属性一样</li></ul></li></ul> <h4 id="子-父"><a href="#子-父" aria-hidden="true" class="header-anchor">#</a> 子 -&gt; 父</h4> <blockquote><p>可以利用指向对象的属性其实是对应一个指向内存地址的指针这点，直接从子组件修改内存中的数据。</p></blockquote> <ol><li>$emit</li></ol> <ul><li>通过自定义事件，通知父组件属性改变
<ul><li>每个 Vue 实例内都能访问到 $emit 方法，而组件继承了 Vue 实例，所以也算是实例</li></ul></li> <li>父组件设置事件监听器来接收改变</li></ul> <ol start="2"><li>使用回调函数通信</li></ol> <ul><li>用 props 传递一个回调，这个函数实际上在父组件执行，props 令其在子组件调用</li></ul> <h3 id="兄弟通信"><a href="#兄弟通信" aria-hidden="true" class="header-anchor">#</a> 兄弟通信</h3> <p>根据计算标准不同有 2-3 种方法。</p> <ol><li>$emit</li></ol> <ul><li>父组件通过 prop 下发作为 callback 的函数，子组件通过 callback 回传数据（或通过 $emit），父组件监听数据变化，使用 prop 将数据下传给其他子组件</li></ul> <ol start="2"><li>callback 回调</li></ol> <blockquote><p>上述方法缺点：
多层组件结构时数据通信复杂低效。</p></blockquote> <ol start="3"><li>eventBus</li></ol> <ul><li>监听事件和传递数据的对象</li></ul> <h3 id="eventbus"><a href="#eventbus" aria-hidden="true" class="header-anchor">#</a> eventBus</h3> <p>使用一个中央类或对象来传递数据。
它也被叫做服务，是应用的中央部分，被注入到需要使用的地方，保存了整个应用中使用的文本或方法。</p> <h4 id="定义"><a href="#定义" aria-hidden="true" class="header-anchor">#</a> 定义</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 为我们提供事件总线服务</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> eventBus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 不需要额外定义其他方法，Vue 自动提供</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="使用"><a href="#使用" aria-hidden="true" class="header-anchor">#</a> 使用</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> eventBus <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'main'</span><span class="token punctuation">;</span>  <span class="token comment">// {}: es6 的语法，用来导入命名的导出对象</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 这个监听器应该在组件启动就开始运行，在实例创建后就被注册</span>
    eventBus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span> <span class="token comment">// 可以监听由在这里创建的 Vue 实例 eventBus 触发的事件</span>
      <span class="token string">'ageWasEdited'</span><span class="token punctuation">,</span>
      <span class="token parameter">age</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token comment">// 通过第二个参数获取数据，每当这个事件触发，会执行回调函数，Vue 会自动执行，将事件触发时传入的参数传递到这个函数的参数</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userAge <span class="token operator">=</span> age<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>注意：必须在加载所有 Vue 组件前，创建事件总栈，否则它们不会执行。</p> <h4 id="在一个事件总线中集中实现代码"><a href="#在一个事件总线中集中实现代码" aria-hidden="true" class="header-anchor">#</a> 在一个事件总线中集中实现代码</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> eventBus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    age<span class="token punctuation">:</span> <span class="token number">27</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">changeAge</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'ageWasEdited'</span><span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>可以广泛使用此类实例，来储存程序中其他部分集中使用的代码，提高复用率，减少重复。</li></ul> <h2 id="props-属性"><a href="#props-属性" aria-hidden="true" class="header-anchor">#</a> props 属性</h2> <h3 id="写法"><a href="#写法" aria-hidden="true" class="header-anchor">#</a> 写法</h3> <p>HTML 中特性名大小写不敏感，所以浏览器会将所有大写字符解释为小写字符。
当使用 DOM 中的模板时，camelCase（驼峰命名法）的 prop 名需要使用其等价的 kebab-case 命名。</p> <h3 id="类型"><a href="#类型" aria-hidden="true" class="header-anchor">#</a> 类型</h3> <ol><li>字符串数组形式</li> <li>对象形式 → name: type</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 字符串数组</span>
props<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'author'</span><span class="token punctuation">]</span>  <span class="token comment">// 每个字符串表示可以从外层设置的属性名</span>
<span class="token comment">// 对象</span>
props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// 名称: 类型(可以是数组)  可做 props 类型验证，以确保只获取特定类型的数据</span>
  title<span class="token punctuation">:</span> String<span class="token punctuation">,</span>
  author<span class="token punctuation">:</span> <span class="token punctuation">[</span>String<span class="token punctuation">,</span> Array<span class="token punctuation">]</span>
  <span class="token comment">// 名称：对象  可做更多验证</span>
  date<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    type<span class="token punctuation">:</span> string<span class="token punctuation">,</span> <span class="token comment">// 设置类型</span>
    required<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 必需</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token string">'Max'</span><span class="token punctuation">,</span> <span class="token comment">// 默认值</span>
  <span class="token punctuation">}</span>，
  date2<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    type<span class="token punctuation">:</span> Object<span class="token punctuation">,</span> <span class="token comment">// 如果类型是对象或数组</span>
    <span class="token function-variable function">default</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 需要是一个返回默认对象的函数</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> <span class="token string">'Max'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><blockquote><p>验证失败，控制台弹出警告：
Invalid prop: type check failed for 'xxx'. Expected xxx, got xxx.</p></blockquote> <h3 id="传递静态-动态-prop"><a href="#传递静态-动态-prop" aria-hidden="true" class="header-anchor">#</a> 传递静态/动态 Prop</h3> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 静态 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>blog-post</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>My journey with Vue<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>blog-post</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 通过 v-bind 动态赋值 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>blog-post</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>post.title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>blog-post</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 动态赋予一个复杂表达式的值 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>blog-post</span>
  <span class="token attr-name"><span class="token namespace">v-bind:</span>title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>post.title+' by '+post.author.name<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>blog-post</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>任何类型的值都可以传给一个 prop</li></ul> <h4 id="数字"><a href="#数字" aria-hidden="true" class="header-anchor">#</a> 数字</h4> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 即便 `42` 是静态的，我们仍然需要 `v-bind` 来告诉 Vue 这是一个 JavaScript 表达式而不是一个字符串。--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>blog-post</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>likes</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>42<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>blog-post</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 用一个变量进行动态赋值。--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>blog-post</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>likes</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>post.likes<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>blog-post</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="emit-自定义事件"><a href="#emit-自定义事件" aria-hidden="true" class="header-anchor">#</a> $emit 自定义事件</h2> <ul><li>$emit('eventName', data)
<ul><li>触发一个自定义事件</li> <li>参数：
<ol><li>指定要触发的事件名称</li> <li>传递的数据</li></ol></li></ul></li></ul> <h3 id="父组件监听"><a href="#父组件监听" aria-hidden="true" class="header-anchor">#</a> 父组件监听</h3> <p>父组件：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>son-cmp</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@emitEventName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>name=$event<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>son-cmp</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- emit 事件监听的结果可以是一个方法，或是一条语句。 --&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>$event 是这个事件传来的数据。</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">'Max'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    sonCmp<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>子组件：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">resetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'emitEventName'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>myName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="slot-插槽"><a href="#slot-插槽" aria-hidden="true" class="header-anchor">#</a> slot 插槽</h2> <p>slot 是 Vue 保留的关键字，会被自动识别，用以接收保存从外部传入的内容并渲染。</p> <p>slot 可以辅助布局，在编写可重用组件时尤其有用。</p> <h3 id="语法"><a href="#语法" aria-hidden="true" class="header-anchor">#</a> 语法</h3> <p>在需要接收数据的子组件内，添加一个类似组件的 slot 标签。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 子组件内（设组件名为 son-cmp） --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 父级 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>son-cmp</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 样式根据子组件走 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- test 根据父级组件的数据变化 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{test}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>son-cmp</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="渲染及风格化"><a href="#渲染及风格化" aria-hidden="true" class="header-anchor">#</a> 渲染及风格化</h3> <ol><li>在限定样式作用域的情况下，通过父级设置给子组件插槽的数据，被渲染时，会使用设置在<strong>子组件内</strong>的样式</li></ol> <ul><li>它最终传递给了子组件</li></ul> <ol start="2"><li>对于模板的编译来说，即渲染这里所有类型的 Vue 代码，样式会有些不同，但对于其他代码而言，模板中有代码的组件，将会是实际生效的那个</li></ol> <ul><li>最先使用该数据的组件或实例</li></ul> <blockquote><p><strong>代码作用域</strong>与<strong>样式作用域</strong>的不同。</p></blockquote> <h3 id="插槽命名"><a href="#插槽命名" aria-hidden="true" class="header-anchor">#</a> 插槽命名</h3> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 子组件内（设组件名为 son-cmp） --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 这是分开设置传入数据的方法： --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>h1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>h2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>h3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>不确定的<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- 其内的值会被视为默认内容 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 父级 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>son-cmp</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- vue1 写法，不推荐 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>h1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- vue2 写法 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>h2</span><span class="token punctuation">&gt;</span></span>World<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">#h2</span><span class="token punctuation">&gt;</span></span>World<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>  <span class="token comment">&lt;!-- 简写 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>son-cmp</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ul><li>一个不带 name 的 <code>&lt;slot&gt;</code> 出口会带有隐含的名字 <code>default</code>，即<strong>默认插槽</strong> <ul><li>未被指定给命名插槽的插入内容，会自动根据默认插槽进行渲染</li> <li>也可以设置默认内容用于展示，即 <code>v-slot:default</code></li> <li>如果不确定是否会在某插槽内进行数据传递，可以设置默认内容，当传入数据时，这些默认内容会被替代</li></ul></li></ul> <h2 id="动态组件"><a href="#动态组件" aria-hidden="true" class="header-anchor">#</a> 动态组件</h2> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>selectedCmp='appAuthor'<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Author<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>selectedCmp='appQuote'<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Quote<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>selectedCmp<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      selectedCmp<span class="token punctuation">:</span> <span class="token string">'appAuthor'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li><code>component</code> <ul><li>Vue 的保留字</li> <li>允许我们动态地对模块的组件进行替换</li> <li>通过 <code>is</code> 属性绑定要添加的组件名
<ul><li>绑定时会检查绑定的值的类型，应为 <em>String</em></li> <li>绑定的值会被当作这个组件的选择器，由此决定动态加载的内容</li></ul></li></ul></li></ul> <blockquote><p>理解动态组件行为：
加载组件时是重新创建，还是用已经存在的实例？
组件在切换时是被销毁并再次创建的。</p></blockquote> <h3 id="动态组件保活"><a href="#动态组件保活" aria-hidden="true" class="header-anchor">#</a> 动态组件保活</h3> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>selectedCmp='appAuthor'<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Author<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>selectedCmp='appQuote'<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Quote<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>keep-alive
<ul><li>确保组件不被销毁</li></ul></li></ul> <h3 id="动态生命周期钩子"><a href="#动态生命周期钩子" aria-hidden="true" class="header-anchor">#</a> 动态生命周期钩子</h3> <h4 id="痛点"><a href="#痛点" aria-hidden="true" class="header-anchor">#</a> 痛点</h4> <p>设置 keep-alive 后，组件不被销毁，我们无法使用 destroyed 钩子。</p> <h4 id="新的钩子"><a href="#新的钩子" aria-hidden="true" class="header-anchor">#</a> 新的钩子</h4> <ol><li>deactivated</li></ol> <ul><li>离开时，处于未激活状态</li> <li>只要一个组件载入另一个动态组件，它就会被调用</li></ul> <ol start="2"><li>activated</li></ol> <ul><li>当浏览时，处于激活状态</li> <li>只要载入动态组件，就会被调用</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.aa07e3f0.js" defer></script><script src="/assets/js/2.3c3a8b86.js" defer></script><script src="/assets/js/19.ea1c561c.js" defer></script>
  </body>
</html>
